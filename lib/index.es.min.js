import n,{Component as t}from"react";import e,{keyframes as r}from"styled-components";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function a(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}function l(n){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function c(n,t){return(c=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function u(n,t){if(null==n)return{};var e,r,o=function(n,t){if(null==n)return{};var e,r,o={},i=Object.keys(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||(o[e]=n[e]);return o}(n,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(r=0;r<i.length;r++)e=i[r],t.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(n,e)&&(o[e]=n[e])}return o}function s(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function f(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function h(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var e=[],r=!0,o=!1,i=void 0;try{for(var a,l=n[Symbol.iterator]();!(r=(a=l.next()).done)&&(e.push(a.value),!t||e.length!==t);r=!0);}catch(n){o=!0,i=n}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return e}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function p(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v={dark:"#0D2C54",interactive:"#00A6ED",success:"#7FB800",warning:"#FFB400",alert:"#F6511D",white:"#ffffff",grey:"#cccccc"},d={tiny:"4px",small:"8px",medium:"16px",large:"32px",extraLarge:"48px"},g=function(){function n(){o(this,n)}return a(n,null,[{key:"hslToRgb",value:function(n,t,e){var r,o,i;if(0===t)r=o=i=e;else{var a=function(n,t,e){return e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n},l=e<.5?e*(1+t):e+t-e*t,c=2*e-l;r=a(c,l,n+1/3),o=a(c,l,n),i=a(c,l,n-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*i)]}},{key:"rgbToHsl",value:function(n,t,e){n/=255,t/=255,e/=255;var r,o,i=Math.max(n,t,e),a=Math.min(n,t,e),l=(i+a)/2;if(i===a)r=o=0;else{var c=i-a;switch(o=l>.5?c/(2-i-a):c/(i+a),i){case n:r=(t-e)/c+(t<e?6:0);break;case t:r=(e-n)/c+2;break;case e:r=(n-t)/c+4}r/=6}return[r,o,l]}},{key:"lightenColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5;if(t&&t.length>=6){var r=parseInt(t.slice(-6,-4),16),o=parseInt(t.slice(-4,-2),16),i=parseInt(t.slice(-2),16),a=n.rgbToHsl(r,o,i);a[2]=Math.min(a[2]+e,1);var l=n.hslToRgb(a[0],a[1],a[2]);return"#".concat(l[0].toString(16)).concat(l[1].toString(16)).concat(l[2].toString(16))}return null}},{key:"darkenColor",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.1;if(t&&t.length>=6){var r=parseInt(t.slice(-6,-4),16),o=parseInt(t.slice(-4,-2),16),i=parseInt(t.slice(-2),16),a=n.rgbToHsl(r,o,i);a[2]=Math.max(a[2]-e,0);var l=n.hslToRgb(a[0],a[1],a[2]),c=l[0].toString(16).length<2?"0".concat(l[0].toString(16)):l[0].toString(16),u=l[1].toString(16).length<2?"0".concat(l[1].toString(16)):l[1].toString(16),s=l[2].toString(16).length<2?"0".concat(l[2].toString(16)):l[2].toString(16);return"#".concat(c).concat(u).concat(s)}return null}},{key:"getBlackOrWhiteContrastColor",value:function(n){if(n&&n.length>=6)return.2126*parseInt(n.slice(-6,-4),16)+.7152*parseInt(n.slice(-4,-2),16)+.0722*parseInt(n.slice(-2),16)<180?"#FFFFFF":"#000000"}}]),n}();function m(){var n=f(["\n            background-color: ",";\n            color: ",";\n            border-radius: ",";\n            line-height: ",";\n            padding: 0 ",";\n            font-size: ",";\n            border : none;\n            cursor: pointer;\n            box-shadow: 0 0 6px 0 ",";\n            \n            &:hover {\n              background: ",";\n              box-shadow: 0 0 7px 0 ",";\n            }\n            \n            &:active {\n              box-shadow: 0 0 4px 0 ",";\n            }\n        "]);return m=function(){return n},n}function y(t){var r=t.text,o=void 0===r?"Submit":r,i=t.color,a=void 0===i?v.interactive:i,l=u(t,["text","color"]),c=g.lightenColor(a,.1),s=g.getBlackOrWhiteContrastColor(a),f=e.button(m(),a,s,d.tiny,d.large,d.medium,d.medium,c,c,c,c);return n.createElement(f,l,o)}function x(){var n=f(["\n  0% {\n    transform: translate(50%, 0);\n  }\n  100% {\n    transform: translate(50%,-",");\n  }\n"]);return x=function(){return n},n}var b=r(x(),d.small);function k(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e="".concat(n.toFixed(t)).split("."),r=e[0],o=e.length>1?".".concat(e[1]):"",i=/(\d+)(\d{3})/;i.test(r);)r=r.replace(i,"$1,$2");return r+o}function w(){var n=f(["\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n          fill : none;\n          stroke: ",";\n          stroke-width: 2;\n        "]);return w=function(){return n},n}function E(){var n=f(["\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n          fill : ",";\n          stroke: ",";\n          opacity: 0.2;\n          stroke-width: 2;\n        "]);return E=function(){return n},n}function S(){var n=f(["\n          display: inline-block;\n          font-size : 12px;\n          color : ",";\n          font-family : sans-serif;\n          font-weight: lighter;\n          position: absolute;\n          top: 12px;\n          transform: translate(50%,-",");\n          background: ",";\n          padding: "," ",";\n          border-radius: ",";\n          opacity: 0;\n          transition: opacity 200ms;\n          \n          animation: "," 200ms ease-out;\n          \n          &:not(:empty) {\n            opacity: 1;\n            \n            &:after {\n                content: '';\n                position: absolute;\n                top: 100%;\n                left: 50%;\n                border-left: 4px solid transparent;\n                border-right: 4px solid transparent;\n                border-top: 4px solid ",";\n                transform: translate(-50%, 0);\n            }\n          }\n        "]);return S=function(){return n},n}function M(){var n=f(["\n          top: 12px;\n          left: 0;\n          position: absolute;\n          color : ",";\n          font-family : sans-serif;\n          font-size : 12px;\n          font-weight: lighter;\n          text-align: center;\n          min-width: 100px;\n          transform:translate(-50%,0);\n        \n          ",":last-child & {\n            text-align: right;\n            transform:translate(-100%,0);\n          }\n        \n          ",":first-child & {\n            text-align: left;\n            transform:translate(0,0);\n          }\n        "]);return M=function(){return n},n}function O(){var n=f(["\n          flex: 1 1 auto;\n          border-left : 2px solid ","; \n          pointer-events : none;\n          overflow: visible;\n          position: relative;\n          height: 10px;\n          \n          &:last-child {\n            width: 0;\n            flex: 0 0 0; \n          }\n        "]);return O=function(){return n},n}function F(){var n=f(["\n          display: flex;\n          flex-flow: row nowrap;\n          border-top : 2px solid ","; \n        "]);return F=function(){return n},n}function P(){var n=f(["\n          stroke-width : 0;\n          stroke: transparent;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          transition: stroke-width 100ms;\n          \n          ",":hover ~ & {\n          stroke-width : 2px;\n            stroke: ","; \n          }\n        "]);return P=function(){return n},n}function C(){var n=f(["\n          stroke-width : 2px;\n          stroke: ",";\n          opacity: 0.2;\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n        "]);return C=function(){return n},n}function j(){var n=f(["\n          stroke-width : 0;\n          stroke: ",";\n          transition: stroke-width 300ms, stroke 300ms;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          stroke-linecap: round;\n           \n          ",":hover ~ & {\n            stroke-width : 6px; \n          }\n        "]);return j=function(){return n},n}function V(){var n=f(["\n          stroke-width : 6px;\n          stroke: ",";\n          transition: stroke-width 300ms;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          stroke-linecap: round;\n           \n          ",":hover ~ & {\n            stroke-width : 10px; \n          }\n        "]);return V=function(){return n},n}function A(){var n=f(["\n          fill: transparent;\n          vector-effect: non-scaling-stroke;\n        "]);return A=function(){return n},n}function I(){var n=f(["\n            display : block;\n            overflow: visible;\n            height: 150px;\n            width: 100%;\n            position: relative;\n        "]);return I=function(){return n},n}function z(){var n=f(["\n            display: block;\n            padding: "," 0 0 0;\n            position: relative;\n        "]);return z=function(){return n},n}var T=function(r){function i(n){var t,e,r;return o(this,i),e=this,(t=!(r=l(i).call(this,n))||"object"!=typeof r&&"function"!=typeof r?s(e):r).formatValuesForLine=t.formatValuesForLine.bind(s(t)),t.lineStrategy=t.lineStrategy.bind(s(t)),t.bezierStrategy=t.bezierStrategy.bind(s(t)),t.controlPoint=t.controlPoint.bind(s(t)),t.line=t.line.bind(s(t)),t.showValue=t.showValue.bind(s(t)),t.state={shownValue:0,shownPosition:1},t}return function(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&c(n,t)}(i,t),a(i,[{key:"render",value:function(){var t=this,r=this.props,o=r.decimals,i=void 0===o?2:o,a=r.color,l=void 0===a?v.interactive:a,c=r.rounded,s=void 0!==c&&c,f=r.values,h=void 0===f?[]:f,m=r.axis,y=void 0===m?[]:m,x=r.prefix,T=void 0===x?null:x,_=r.postfix,B=void 0===_?null:_,L=(u(r,["decimals","color","rounded","values","axis","prefix","postfix"]),g.darkenColor(l,.2)),R=g.lightenColor(l,.1),D=g.getBlackOrWhiteContrastColor(l),H=e.div(z(),d.large),W=e.svg(I()),$=e.rect(A()),q=e.line(V(),l,$),G=e.line(j(),R,$),J=e.line(C(),l),K=e.line(P(),$,l),N=e.div(F(),L),Q=e.div(O(),L),U=e.div(M(),L,Q,Q),X=e.span(S(),D,d.small,l,d.tiny,d.small,d.tiny,b,l),Y=e.path(E(),l,l),Z=e.path(w(),l),nn=Math.max.apply(Math,p(h)),tn=s?this.bezierStrategy:this.lineStrategy,en=this.formatValuesForLine(tn,h),rn=this.formatValuesForFill(tn,h),on=this.formatCoordinatesAsPair(h),an=110/on.length,ln=this.formatCoordinatesForAxis(y);return n.createElement(H,null,n.createElement(W,{preserveAspectRatio:"none",viewBox:"0 0 100 "+nn},n.createElement(Z,{d:en}),n.createElement(Y,{d:rn}),on.map(function(e){var r=e[0],o=e[1];return n.createElement("g",{key:r},n.createElement($,{x:r-an/2,y:0,width:.8*an,height:nn,onMouseEnter:function(){t.showValue(nn-o,r)},onMouseLeave:function(){t.showValue(null,null)}}),n.createElement(K,{x1:r,y1:o,x2:r,y2:nn}),n.createElement(J,{x1:r,y1:o,x2:r,y2:0}),n.createElement(q,{x1:r,y1:o,x2:r,y2:o}),n.createElement(G,{x1:r,y1:o,x2:r,y2:o}))})),ln.length?n.createElement(N,null,ln.map(function(t){return n.createElement(Q,{key:t.x},n.createElement(U,null,t.label))})):null,null!==this.state.shownValue?n.createElement(X,{style:{right:this.state.shownPosition+"%"}},T," ",k(this.state.shownValue,i)," ",B):null)}},{key:"showValue",value:function(n,t){this.setState({shownValue:n,shownPosition:100-t})}},{key:"formatCoordinatesAsPair",value:function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(n.length<2)return[];for(var t=[],e=Math.max.apply(Math,[0].concat(p(n))),r=100/(n.length-1),o=0;o<n.length;o++)t.push([o*r,Math.min(e,e-n[o])]);return t}},{key:"formatCoordinatesForAxis",value:function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[],e=100/(n.length-1),r=0;r<n.length;r++)t.push({x:r*e,label:n[r]});return t}},{key:"formatValuesForLine",value:function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],e=this.formatCoordinatesAsPair(t);return e.reduce(function(t,e,r,o){return 0===r?"M ".concat(e[0],",").concat(e[1]):"".concat(t," ").concat(n(e,r,o))},"")}},{key:"formatValuesForFill",value:function(n){var t=this,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.formatCoordinatesAsPair(e),o=[[0,Math.max.apply(Math,p(e))]].concat(p(r),[[100,Math.max.apply(Math,p(e))]]);return o.reduce(function(e,r,i,a){return 0===i?"M ".concat(r[0],",").concat(r[1]):1===i||i===o.length-1?"".concat(e," ").concat(t.lineStrategy(r)):"".concat(e," ").concat(n(r,i,a))},"")}},{key:"lineStrategy",value:function(n){return"L ".concat(n[0]," ").concat(n[1])}},{key:"bezierStrategy",value:function(n,t,e){var r=h(this.controlPoint(e[t-1],e[t-2],n),2),o=r[0],i=r[1],a=h(this.controlPoint(n,e[t-1],e[t+1],!0),2),l=a[0],c=a[1];return"C ".concat(o,",").concat(i," ").concat(l,",").concat(c," ").concat(n[0],",").concat(n[1])}},{key:"line",value:function(n,t){var e=t[0]-n[0],r=t[1]-n[1];return{length:Math.sqrt(Math.pow(e,2)+Math.pow(r,2)),angle:Math.atan2(r,e)}}},{key:"controlPoint",value:function(n,t,e,r){var o=t||n,i=e||n,a=this.line(o,i),l=a.angle+(r?Math.PI:0),c=.15*a.length;return[n[0]+Math.cos(l)*c,n[1]+Math.sin(l)*c]}}]),i}();function _(){var n=f(["\n            stroke-width: 2px;\n            fill: none;\n            stroke: ",";\n            opacity: 0.2;\n        "]);return _=function(){return n},n}function B(){var n=f(["\n            display : block;\n            height: 150px;\n            width: 150px;\n        "]);return B=function(){return n},n}function L(){var n=f(["\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n        "]);return L=function(){return n},n}function R(){var n=f(["\n            position: absolute;\n            display : block;\n            text-align: center;\n            top: 80px;\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n            width: 150px;\n        "]);return R=function(){return n},n}function D(){var n=f(["\n            position: absolute;\n            display : block;\n            text-align: center;\n            top: 40px;\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n            width: 150px;\n        "]);return D=function(){return n},n}function H(){var n=f(["\n            display : block;\n            position: relative;\n            height: 150px;\n            width: 150px;\n        "]);return H=function(){return n},n}function W(){var n=f(["\n            stroke-width: 2px;\n            fill: none;\n            stroke: ",";\n            //stroke-linecap: round;\n            transform: rotate(-90deg);\n            transform-origin: center;\n        "]);return W=function(){return n},n}function $(t){var r=t.value,o=void 0===r?0:r,i=t.maxValue,a=void 0===i?0:i,l=t.decimals,c=void 0===l?2:l,s=t.color,f=void 0===s?v.interactive:s,h=t.metric,p=void 0===h?null:h,g=t.prefix,m=void 0===g?null:g,y=t.postfix,x=void 0===y?null:y,b=(u(t,["value","maxValue","decimals","color","metric","prefix","postfix"]),o/a*100),w=k(o,c),E=e.circle(W(),f),S=e.div(H()),M=e.div(D(),d.large,f),O=e.div(R(),d.medium,f),F=e.span(L(),d.medium,f),P=e.svg(B()),C=e.circle(_(),f);return n.createElement(S,null,n.createElement(P,{viewBox:"0 0 33.83098862 33.83098862"},n.createElement(C,{cx:"16.91549431",cy:"16.91549431",r:"15.91549431"}),n.createElement(E,{strokeDasharray:b+",100",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"})),n.createElement(M,null,n.createElement(F,null,m),w,n.createElement(F,null,x)),n.createElement(O,null,p))}export{y as Button,$ as CircleChart,T as LineChart};
