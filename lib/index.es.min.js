import n,{Component as t}from"react";import e,{keyframes as r}from"styled-components";function o(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function i(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function s(n,t,e){return t&&i(n.prototype,t),e&&i(n,e),n}function a(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(t&&t.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),t&&u(n,t)}function l(n){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)})(n)}function u(n,t){return(u=Object.setPrototypeOf||function(n,t){return n.__proto__=t,n})(n,t)}function c(n){if(void 0===n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}function f(n,t){return!t||"object"!=typeof t&&"function"!=typeof t?c(n):t}function p(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}function h(n){return function(n){if(Array.isArray(n)){for(var t=0,e=new Array(n.length);t<n.length;t++)e[t]=n[t];return e}}(n)||function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var v="#0D2C54",d="#00A6ED",m="#ffffff",x="4px",y="8px",w="16px",g="32px";function k(){var n=p(["\n  0% {\n    transform: translate(50%, 0);\n  }\n  100% {\n    transform: translate(50%,-",");\n  }\n"]);return k=function(){return n},n}var b=r(k(),y);function E(n){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,e=(n=n.toFixed(t)+"").split("."),r=e[0],o=e.length>1?"."+e[1]:"",i=/(\d+)(\d{3})/;i.test(r);)r=r.replace(i,"$1,$2");return r+o}function V(){var n=p(["\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n  fill : none;\n  stroke: ",";\n  stroke-width: 2;\n"]);return V=function(){return n},n}function j(){var n=p(["\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n  fill : ",";\n  stroke: ",";\n  opacity: 0.2;\n  stroke-width: 2;\n"]);return j=function(){return n},n}function O(){var n=p(["\n  display: inline-block;\n  font-size : 12px;\n  color : ",";\n  font-family : sans-serif;\n  font-weight: lighter;\n  position: absolute;\n  top: 12px;\n  transform: translate(50%,-",");\n  background: ",";\n  padding: "," ",";\n  border-radius: ",";\n  opacity: 0;\n  transition: opacity 200ms;\n  \n  animation: "," 200ms ease-out;\n  \n  &:not(:empty) {\n    opacity: 1;\n    \n    &:after {\n        content: '';\n        position: absolute;\n        top: 100%;\n        left: 50%;\n        border-left: 4px solid transparent;\n        border-right: 4px solid transparent;\n        border-top: 4px solid ",";\n        transform: translate(-50%, 0);\n    }\n  }\n"]);return O=function(){return n},n}function F(){var n=p(["\n  top: 12px;\n  left: 0;\n  position: absolute;\n  color : ",";\n  font-family : sans-serif;\n  font-size : 12px;\n  font-weight: lighter;\n  text-align: center;\n  min-width: 100px;\n  transform:translate(-50%,0);\n\n  ",":last-child & {\n    text-align: right;\n    transform:translate(-100%,0);\n  }\n\n  ",":first-child & {\n    text-align: left;\n    transform:translate(0,0);\n  }\n"]);return F=function(){return n},n}function M(){var n=p(["\n  flex: 1 1 auto;\n  border-left : 2px solid ","; \n  pointer-events : none;\n  overflow: visible;\n  position: relative;\n  height: 10px;\n  \n  &:last-child {\n    width: 0;\n    flex: 0 0 0; \n  }\n"]);return M=function(){return n},n}function A(){var n=p(["\n  display: flex;\n  flex-flow: row nowrap;\n  border-top : 2px solid ","; \n"]);return A=function(){return n},n}function P(){var n=p(["\n  stroke-width : 0;\n  stroke: transparent;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  transition: stroke-width 100ms;\n  \n  ",":hover ~ & {\n  stroke-width : 2px;\n    stroke: ","; \n  }\n"]);return P=function(){return n},n}function _(){var n=p(["\n  stroke-width : 2px;\n  stroke: ",";\n  opacity: 0.2;\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n"]);return _=function(){return n},n}function z(){var n=p(["\n  stroke-width : 0;\n  stroke: ",";\n  transition: stroke-width 300ms, stroke 300ms;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  stroke-linecap: round;\n   \n  ",":hover ~ & {\n    stroke-width : 6px; \n  }\n"]);return z=function(){return n},n}function D(){var n=p(["\n  stroke-width : 6px;\n  stroke: ",";\n  transition: stroke-width 300ms;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  stroke-linecap: round;\n   \n  ",":hover ~ & {\n    stroke-width : 10px; \n  }\n"]);return D=function(){return n},n}function L(){var n=p(["\n  fill: transparent;\n  vector-effect: non-scaling-stroke;\n"]);return L=function(){return n},n}function C(){var n=p(["\n    display : block;\n    overflow: visible;\n    height: 150px;\n    width: 100%;\n    position: relative;\n"]);return C=function(){return n},n}function S(){var n=p(["\n    display: block;\n    padding: "," 0 0 0;\n    position: relative;\n"]);return S=function(){return n},n}var T=e.div(S(),g),B=e.svg(C()),R=e.rect(L()),$=e.line(D(),d,R),I=e.line(z(),"#E7F0F3",R),q=e.line(_(),d),G=e.line(P(),R,d),H=e.div(A(),v),J=e.div(M(),v),K=e.div(F(),v,J,J),N=e.span(O(),m,y,d,x,y,x,b,d),Q=e.polyline(j(),d,d),U=e.polyline(V(),d),W=function(e){function r(n){var t;return o(this,r),(t=f(this,l(r).call(this,n))).formatValuesForLine=t.formatValuesForLine.bind(c(t)),t.formatValuesForDots=t.formatValuesForDots.bind(c(t)),t.showValue=t.showValue.bind(c(t)),t.decimals=t.props.decimals?t.props.decimals:0,t.state={shownValue:0,shownPosition:1},t}return a(r,t),s(r,[{key:"render",value:function(){var t=this;if(!this.props.values)return null;var e=Math.max.apply(Math,h(this.props.values)),r=this.formatValuesForLine(),o=[0,e].concat(h(r),[100,e]),i=this.formatValuesForDots(),s=110/i.length,a=this.formatCoordinatesForAxis();return n.createElement(T,null,n.createElement(B,{preserveAspectRatio:"none",viewBox:"0 0 100 "+e},n.createElement(Q,{points:o.join(",")}),n.createElement(U,{points:r.join(",")}),i.map(function(r){var o=r[0],i=r[1];return n.createElement("g",{key:o},n.createElement(R,{x:o-s/2,y:0,width:.8*s,height:e,onMouseEnter:function(){t.showValue(e-i,o)},onMouseLeave:function(){t.showValue(null,null)}}),n.createElement(G,{x1:o,y1:i,x2:o,y2:e}),n.createElement(q,{x1:o,y1:i,x2:o,y2:0}),n.createElement($,{x1:o,y1:i,x2:o,y2:i}),n.createElement(I,{x1:o,y1:i,x2:o,y2:i}))})),a.length?n.createElement(H,null,a.map(function(t){return n.createElement(J,{key:t.x},n.createElement(K,null,t.label))})):null,null!==this.state.shownValue?n.createElement(N,{style:{right:this.state.shownPosition+"%"}},this.props.prefix," ",E(this.state.shownValue,this.decimals)," ",this.props.postfix):null)}},{key:"showValue",value:function(n,t){this.setState({shownValue:n,shownPosition:100-t})}},{key:"formatValuesForLine",value:function(){if(this.props.values.length<2)return[];for(var n=[],t=Math.max.apply(Math,[0].concat(h(this.props.values))),e=100/(this.props.values.length-1),r=0;r<this.props.values.length;r++)n.push(r*e),n.push(Math.min(t,t-this.props.values[r]));return n}},{key:"formatCoordinatesForAxis",value:function(){if(!this.props.axis)return[];for(var n=[],t=100/(this.props.axis.length-1),e=0;e<this.props.axis.length;e++)n.push({x:e*t,label:this.props.axis[e]});return n}},{key:"formatValuesForDots",value:function(){if(this.props.values.length<2)return[];for(var n=[],t=Math.max.apply(Math,h(this.props.values)),e=100/(this.props.values.length-1),r=0;r<this.props.values.length;r++)n.push([r*e,Math.min(t,t-this.props.values[r])]);return n}}]),r}();function X(){var n=p(["\n    stroke-width: 2px;\n    fill: none;\n    stroke: ",";\n    //stroke-linecap: round;\n    transform: rotate(-90deg);\n    transform-origin: center;\n"]);return X=function(){return n},n}function Y(){var n=p(["\n    stroke-width: 2px;\n    fill: none;\n    stroke: ",";\n    opacity: 0.2;\n"]);return Y=function(){return n},n}function Z(){var n=p(["\n    display : block;\n    height: 150px;\n    width: 150px;\n"]);return Z=function(){return n},n}function nn(){var n=p(["\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n"]);return nn=function(){return n},n}function tn(){var n=p(["\n    position: absolute;\n    display : block;\n    text-align: center;\n    top: 80px;\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n    width: 150px;\n"]);return tn=function(){return n},n}function en(){var n=p(["\n    position: absolute;\n    display : block;\n    text-align: center;\n    top: 40px;\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n    width: 150px;\n"]);return en=function(){return n},n}function rn(){var n=p(["\n    display : block;\n    position: relative;\n    height: 150px;\n    width: 150px;\n"]);return rn=function(){return n},n}var on=e.div(rn()),sn=e.div(en(),g,d),an=e.div(tn(),w,d),ln=e.span(nn(),w,d),un=e.svg(Z()),cn=e.circle(Y(),d),fn=e.circle(X(),d),pn=function(e){function r(n){return o(this,r),f(this,l(r).call(this,n))}return a(r,t),s(r,[{key:"render",value:function(){var t=this.props.value?this.props.value:0,e=t/(this.props.maxValue?this.props.maxValue:0)*100,r=E(t,this.props.decimals);return n.createElement(on,null,n.createElement(un,{viewBox:"0 0 33.83098862 33.83098862"},n.createElement(cn,{cx:"16.91549431",cy:"16.91549431",r:"15.91549431"}),n.createElement(fn,{strokeDasharray:e+",100",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"})),n.createElement(sn,null,n.createElement(ln,null,this.props.prefix),r,n.createElement(ln,null,this.props.postfix)),n.createElement(an,null,this.props.metric))}}]),r}();export{pn as CircleChart,W as LineChart};
