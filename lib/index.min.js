"use strict";function _interopDefault(t){return t&&"object"==typeof t&&"default"in t?t.default:t}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),styled=require("styled-components"),styled__default=_interopDefault(styled);function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&_setPrototypeOf(t,e)}function _getPrototypeOf(t){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function _setPrototypeOf(t,e){return(_setPrototypeOf=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function _assertThisInitialized(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function _possibleConstructorReturn(t,e){return!e||"object"!=typeof e&&"function"!=typeof e?_assertThisInitialized(t):e}function _taggedTemplateLiteral(t,e){return e=e||t.slice(0),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function _slicedToArray(t,e){return _arrayWithHoles(t)||_iterableToArrayLimit(t,e)||_nonIterableRest()}function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function _arrayWithHoles(t){if(Array.isArray(t))return t}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _iterableToArrayLimit(t,e){var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=t[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!e||n.length!==e);r=!0);}catch(t){a=!0,o=t}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var colors={dark:"#0D2C54",interactive:"#00A6ED",success:"#7FB800",warning:"#FFB400",alert:"#F6511D",white:"#ffffff",grey:"#cccccc"},spacings={tiny:"4px",small:"8px",medium:"16px",large:"32px",extraLarge:"48px"},ColorChanger=function(){function p(){_classCallCheck(this,p)}return _createClass(p,null,[{key:"hslToRgb",value:function(t,e,n){var r,a,o;if(0===e)r=a=o=n;else{var i=function(t,e,n){return n<0&&(n+=1),1<n&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},l=n<.5?n*(1+e):n+e-n*e,s=2*n-l;r=i(s,l,t+1/3),a=i(s,l,t),o=i(s,l,t-1/3)}return[Math.round(255*r),Math.round(255*a),Math.round(255*o)]}},{key:"rgbToHsl",value:function(t,e,n){t/=255,e/=255,n/=255;var r,a,o=Math.max(t,e,n),i=Math.min(t,e,n),l=(o+i)/2;if(o===i)r=a=0;else{var s=o-i;switch(a=.5<l?s/(2-o-i):s/(o+i),o){case t:r=(e-n)/s+(e<n?6:0);break;case e:r=(n-t)/s+2;break;case n:r=(t-e)/s+4}r/=6}return[r,a,l]}},{key:"lightenColor",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:.5;if(t&&6<=t.length){var r=parseInt(t.slice(-6,-4),16),a=parseInt(t.slice(-4,-2),16),o=parseInt(t.slice(-2),16),i=p.rgbToHsl(r,a,o);i[2]=Math.min(i[2]+n,1);var l=p.hslToRgb(i[0],i[1],i[2]);return"#".concat(l[0].toString(16)).concat(l[1].toString(16)).concat(l[2].toString(16))}return null}},{key:"darkenColor",value:function(t,e){var n=1<arguments.length&&void 0!==e?e:.1;if(t&&6<=t.length){var r=parseInt(t.slice(-6,-4),16),a=parseInt(t.slice(-4,-2),16),o=parseInt(t.slice(-2),16),i=p.rgbToHsl(r,a,o);i[2]=Math.max(i[2]-n,0);var l=p.hslToRgb(i[0],i[1],i[2]),s=l[0].toString(16).length<2?"0".concat(l[0].toString(16)):l[0].toString(16),c=l[1].toString(16).length<2?"0".concat(l[1].toString(16)):l[1].toString(16),u=l[2].toString(16).length<2?"0".concat(l[2].toString(16)):l[2].toString(16);return"#".concat(s).concat(c).concat(u)}return null}},{key:"getBlackOrWhiteContrastColor",value:function(t){if(t&&6<=t.length)return.2126*parseInt(t.slice(-6,-4),16)+.7152*parseInt(t.slice(-4,-2),16)+.0722*parseInt(t.slice(-2),16)<180?"#FFFFFF":"#000000"}}]),p}();function _templateObject(){var t=_taggedTemplateLiteral(["\n            background-color: ",";\n            color: ",";\n            border-radius: ",";\n            line-height: ",";\n            padding: 0 ",";\n            font-size: ",";\n            border : none;\n            cursor: pointer;\n            box-shadow: 0 0 6px 0 ",";\n            \n            &:hover {\n              background: ",";\n              box-shadow: 0 0 7px 0 ",";\n            }\n            \n            &:active {\n              box-shadow: 0 0 4px 0 ",";\n            }\n        "]);return _templateObject=function(){return t},t}var Button=function(){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,React.Component),_createClass(e,[{key:"render",value:function(){var t=this.props.color?this.props.color:colors.interactive,e=ColorChanger.lightenColor(t,.1),n=ColorChanger.getBlackOrWhiteContrastColor(t),r=styled__default.button(_templateObject(),t,n,spacings.tiny,spacings.large,spacings.medium,spacings.medium,e,e,e,e);return React__default.createElement(r,this.props,this.props.text)}}]),e}();function _templateObject$1(){var t=_taggedTemplateLiteral(["\n  0% {\n    transform: translate(50%, 0);\n  }\n  100% {\n    transform: translate(50%,-",");\n  }\n"]);return _templateObject$1=function(){return t},t}var PopIn=styled.keyframes(_templateObject$1(),spacings.small);function formatNumber(t){for(var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n="".concat(t.toFixed(e)).split("."),r=n[0],a=1<n.length?".".concat(n[1]):"",o=/(\d+)(\d{3})/;o.test(r);)r=r.replace(o,"$1,$2");return r+a}function _templateObject13(){var t=_taggedTemplateLiteral(["\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n          fill : none;\n          stroke: ",";\n          stroke-width: 2;\n        "]);return _templateObject13=function(){return t},t}function _templateObject12(){var t=_taggedTemplateLiteral(["\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n          fill : ",";\n          stroke: ",";\n          opacity: 0.2;\n          stroke-width: 2;\n        "]);return _templateObject12=function(){return t},t}function _templateObject11(){var t=_taggedTemplateLiteral(["\n          display: inline-block;\n          font-size : 12px;\n          color : ",";\n          font-family : sans-serif;\n          font-weight: lighter;\n          position: absolute;\n          top: 12px;\n          transform: translate(50%,-",");\n          background: ",";\n          padding: "," ",";\n          border-radius: ",";\n          opacity: 0;\n          transition: opacity 200ms;\n          \n          animation: "," 200ms ease-out;\n          \n          &:not(:empty) {\n            opacity: 1;\n            \n            &:after {\n                content: '';\n                position: absolute;\n                top: 100%;\n                left: 50%;\n                border-left: 4px solid transparent;\n                border-right: 4px solid transparent;\n                border-top: 4px solid",";\n                transform: translate(-50%, 0);\n            }\n          }\n        "]);return _templateObject11=function(){return t},t}function _templateObject10(){var t=_taggedTemplateLiteral(["\n          top: 12px;\n          left: 0;\n          position: absolute;\n          color : ",";\n          font-family : sans-serif;\n          font-size : 12px;\n          font-weight: lighter;\n          text-align: center;\n          min-width: 100px;\n          transform:translate(-50%,0);\n        \n          ",":last-child & {\n            text-align: right;\n            transform:translate(-100%,0);\n          }\n        \n          ",":first-child & {\n            text-align: left;\n            transform:translate(0,0);\n          }\n        "]);return _templateObject10=function(){return t},t}function _templateObject9(){var t=_taggedTemplateLiteral(["\n          flex: 1 1 auto;\n          border-left : 2px solid ","; \n          pointer-events : none;\n          overflow: visible;\n          position: relative;\n          height: 10px;\n          \n          &:last-child {\n            width: 0;\n            flex: 0 0 0; \n          }\n        "]);return _templateObject9=function(){return t},t}function _templateObject8(){var t=_taggedTemplateLiteral(["\n          display: flex;\n          flex-flow: row nowrap;\n          border-top : 2px solid ","; \n        "]);return _templateObject8=function(){return t},t}function _templateObject7(){var t=_taggedTemplateLiteral(["\n          stroke-width : 0;\n          stroke: transparent;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          transition: stroke-width 100ms;\n          \n          ",":hover ~ & {\n          stroke-width : 2px;\n            stroke: ","; \n          }\n        "]);return _templateObject7=function(){return t},t}function _templateObject6(){var t=_taggedTemplateLiteral(["\n          stroke-width : 2px;\n          stroke: ",";\n          opacity: 0.2;\n          vector-effect: non-scaling-stroke;\n          pointer-events : none;\n        "]);return _templateObject6=function(){return t},t}function _templateObject5(){var t=_taggedTemplateLiteral(["\n          stroke-width : 0;\n          stroke: ",";\n          transition: stroke-width 300ms, stroke 300ms;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          stroke-linecap: round;\n           \n          ",":hover ~ & {\n            stroke-width : 6px; \n          }\n        "]);return _templateObject5=function(){return t},t}function _templateObject4(){var t=_taggedTemplateLiteral(["\n          stroke-width : 6px;\n          stroke: ",";\n          transition: stroke-width 300ms;\n          pointer-events : none;\n          vector-effect: non-scaling-stroke;\n          stroke-linecap: round;\n           \n          ",":hover ~ & {\n            stroke-width : 10px; \n          }\n        "]);return _templateObject4=function(){return t},t}function _templateObject3(){var t=_taggedTemplateLiteral(["\n          fill: transparent;\n          vector-effect: non-scaling-stroke;\n        "]);return _templateObject3=function(){return t},t}function _templateObject2(){var t=_taggedTemplateLiteral(["\n            display : block;\n            overflow: visible;\n            height: 150px;\n            width: 100%;\n            position: relative;\n        "]);return _templateObject2=function(){return t},t}function _templateObject$2(){var t=_taggedTemplateLiteral(["\n            display: block;\n            padding: "," 0 0 0;\n            position: relative;\n        "]);return _templateObject$2=function(){return t},t}var LineChart=function(){function n(t){var e;return _classCallCheck(this,n),(e=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,t))).formatValuesForLine=e.formatValuesForLine.bind(_assertThisInitialized(e)),e.lineStrategy=e.lineStrategy.bind(_assertThisInitialized(e)),e.bezierStrategy=e.bezierStrategy.bind(_assertThisInitialized(e)),e.controlPoint=e.controlPoint.bind(_assertThisInitialized(e)),e.line=e.line.bind(_assertThisInitialized(e)),e.formatCoordinatesAsPair=e.formatCoordinatesAsPair.bind(_assertThisInitialized(e)),e.showValue=e.showValue.bind(_assertThisInitialized(e)),e.decimals=e.props.decimals?e.props.decimals:0,e.state={shownValue:0,shownPosition:1},e}return _inherits(n,React.Component),_createClass(n,[{key:"render",value:function(){var r=this;if(!this.props.values)return null;var t=this.props.color?this.props.color:colors.interactive,e=ColorChanger.darkenColor(t,.2),n=ColorChanger.lightenColor(t,.1),a=ColorChanger.getBlackOrWhiteContrastColor(t),o=styled__default.div(_templateObject$2(),spacings.large),i=styled__default.svg(_templateObject2()),l=styled__default.rect(_templateObject3()),s=styled__default.line(_templateObject4(),t,l),c=styled__default.line(_templateObject5(),n,l),u=styled__default.line(_templateObject6(),t),p=styled__default.line(_templateObject7(),l,t),f=styled__default.div(_templateObject8(),e),_=styled__default.div(_templateObject9(),e),d=styled__default.div(_templateObject10(),e,_,_),h=styled__default.span(_templateObject11(),a,spacings.small,t,spacings.tiny,spacings.small,spacings.tiny,PopIn,t),m=styled__default.path(_templateObject12(),t,t),g=styled__default.path(_templateObject13(),t),b=Math.max.apply(Math,_toConsumableArray(this.props.values)),y=this.props.rounded?this.bezierStrategy:this.lineStrategy,v=this.formatValuesForLine(y),O=this.formatValuesForFill(y),x=this.formatCoordinatesAsPair(),j=110/x.length,k=this.formatCoordinatesForAxis();return React__default.createElement(o,null,React__default.createElement(i,{preserveAspectRatio:"none",viewBox:"0 0 100 "+b},React__default.createElement(g,{d:v}),React__default.createElement(m,{d:O}),x.map(function(t){var e=t[0],n=t[1];return React__default.createElement("g",{key:e},React__default.createElement(l,{x:e-j/2,y:0,width:.8*j,height:b,onMouseEnter:function(){r.showValue(b-n,e)},onMouseLeave:function(){r.showValue(null,null)}}),React__default.createElement(p,{x1:e,y1:n,x2:e,y2:b}),React__default.createElement(u,{x1:e,y1:n,x2:e,y2:0}),React__default.createElement(s,{x1:e,y1:n,x2:e,y2:n}),React__default.createElement(c,{x1:e,y1:n,x2:e,y2:n}))})),k.length?React__default.createElement(f,null,k.map(function(t){return React__default.createElement(_,{key:t.x},React__default.createElement(d,null,t.label))})):null,null!==this.state.shownValue?React__default.createElement(h,{style:{right:this.state.shownPosition+"%"}},this.props.prefix," ",formatNumber(this.state.shownValue,this.decimals)," ",this.props.postfix):null)}},{key:"showValue",value:function(t,e){this.setState({shownValue:t,shownPosition:100-e})}},{key:"formatCoordinatesAsPair",value:function(){if(this.props.values.length<2)return[];for(var t=[],e=Math.max.apply(Math,[0].concat(_toConsumableArray(this.props.values))),n=100/(this.props.values.length-1),r=0;r<this.props.values.length;r++)t.push([r*n,Math.min(e,e-this.props.values[r])]);return t}},{key:"formatCoordinatesForAxis",value:function(){if(!this.props.axis)return[];for(var t=[],e=100/(this.props.axis.length-1),n=0;n<this.props.axis.length;n++)t.push({x:n*e,label:this.props.axis[n]});return t}},{key:"formatValuesForLine",value:function(a){return this.formatCoordinatesAsPair().reduce(function(t,e,n,r){return 0===n?"M ".concat(e[0],",").concat(e[1]):"".concat(t," ").concat(a(e,n,r))},"")}},{key:"formatValuesForFill",value:function(a){var o=this,t=this.formatCoordinatesAsPair(),i=[[0,Math.max.apply(Math,_toConsumableArray(this.props.values))]].concat(_toConsumableArray(t),[[100,Math.max.apply(Math,_toConsumableArray(this.props.values))]]);return i.reduce(function(t,e,n,r){return 0===n?"M ".concat(e[0],",").concat(e[1]):1===n||n===i.length-1?"".concat(t," ").concat(o.lineStrategy(e)):"".concat(t," ").concat(a(e,n,r))},"")}},{key:"lineStrategy",value:function(t){return"L ".concat(t[0]," ").concat(t[1])}},{key:"bezierStrategy",value:function(t,e,n){var r=_slicedToArray(this.controlPoint(n[e-1],n[e-2],t),2),a=r[0],o=r[1],i=_slicedToArray(this.controlPoint(t,n[e-1],n[e+1],!0),2),l=i[0],s=i[1];return"C ".concat(a,",").concat(o," ").concat(l,",").concat(s," ").concat(t[0],",").concat(t[1])}},{key:"line",value:function(t,e){var n=e[0]-t[0],r=e[1]-t[1];return{length:Math.sqrt(Math.pow(n,2)+Math.pow(r,2)),angle:Math.atan2(r,n)}}},{key:"controlPoint",value:function(t,e,n,r){var a=e||t,o=n||t,i=this.line(a,o),l=i.angle+(r?Math.PI:0),s=.15*i.length;return[t[0]+Math.cos(l)*s,t[1]+Math.sin(l)*s]}}]),n}();function _templateObject7$1(){var t=_taggedTemplateLiteral(["\n            stroke-width: 2px;\n            fill: none;\n            stroke: ",";\n            opacity: 0.2;\n        "]);return _templateObject7$1=function(){return t},t}function _templateObject6$1(){var t=_taggedTemplateLiteral(["\n            display : block;\n            height: 150px;\n            width: 150px;\n        "]);return _templateObject6$1=function(){return t},t}function _templateObject5$1(){var t=_taggedTemplateLiteral(["\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n        "]);return _templateObject5$1=function(){return t},t}function _templateObject4$1(){var t=_taggedTemplateLiteral(["\n            position: absolute;\n            display : block;\n            text-align: center;\n            top: 80px;\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n            width: 150px;\n        "]);return _templateObject4$1=function(){return t},t}function _templateObject3$1(){var t=_taggedTemplateLiteral(["\n            position: absolute;\n            display : block;\n            text-align: center;\n            top: 40px;\n            font-size: ",";\n            color: ",";\n            font-family : sans-serif;\n            width: 150px;\n        "]);return _templateObject3$1=function(){return t},t}function _templateObject2$1(){var t=_taggedTemplateLiteral(["\n            display : block;\n            position: relative;\n            height: 150px;\n            width: 150px;\n        "]);return _templateObject2$1=function(){return t},t}function _templateObject$3(){var t=_taggedTemplateLiteral(["\n            stroke-width: 2px;\n            fill: none;\n            stroke: ",";\n            //stroke-linecap: round;\n            transform: rotate(-90deg);\n            transform-origin: center;\n        "]);return _templateObject$3=function(){return t},t}var CircleChart=function(){function e(t){return _classCallCheck(this,e),_possibleConstructorReturn(this,_getPrototypeOf(e).call(this,t))}return _inherits(e,React.Component),_createClass(e,[{key:"render",value:function(){var t=this.props.value?this.props.value:0,e=t/(this.props.maxValue?this.props.maxValue:0)*100,n=formatNumber(t,this.props.decimals),r=this.props.color?this.props.color:colors.interactive,a=styled__default.circle(_templateObject$3(),r),o=styled__default.div(_templateObject2$1()),i=styled__default.div(_templateObject3$1(),spacings.large,r),l=styled__default.div(_templateObject4$1(),spacings.medium,r),s=styled__default.span(_templateObject5$1(),spacings.medium,r),c=styled__default.svg(_templateObject6$1()),u=styled__default.circle(_templateObject7$1(),r);return React__default.createElement(o,null,React__default.createElement(c,{viewBox:"0 0 33.83098862 33.83098862"},React__default.createElement(u,{cx:"16.91549431",cy:"16.91549431",r:"15.91549431"}),React__default.createElement(a,{strokeDasharray:e+",100",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"})),React__default.createElement(i,null,React__default.createElement(s,null,this.props.prefix),n,React__default.createElement(s,null,this.props.postfix)),React__default.createElement(l,null,this.props.metric))}}]),e}();exports.Button=Button,exports.CircleChart=CircleChart,exports.LineChart=LineChart;
