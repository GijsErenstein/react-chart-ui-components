"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var React=require("react"),React__default=_interopDefault(React),styled=require("styled-components"),styled__default=_interopDefault(styled);function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _taggedTemplateLiteral(e,t){return t=t||e.slice(0),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}var lightColors={dark:"#D2D5D9",interactive:"#E7F0F3",success:"#DDE3D0",warning:"#EAE2D0",alert:"#E9D8D3"},colors={dark:"#0D2C54",interactive:"#00A6ED",success:"#7FB800",warning:"#FFB400",alert:"#F6511D",white:"#ffffff",grey:"#cccccc"},spacings={tiny:"4px",small:"8px",medium:"16px",large:"32px",extraLarge:"48px"};function _templateObject(){var e=_taggedTemplateLiteral(["\n  0% {\n    transform: translate(50%, 0);\n  }\n  100% {\n    transform: translate(50%,-",");\n  }\n"]);return _templateObject=function(){return e},e}var PopIn=styled.keyframes(_templateObject(),spacings.small);function formatNumber(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:2,n=(e=e.toFixed(t)+"").split("."),r=n[0],a=1<n.length?"."+n[1]:"",o=/(\d+)(\d{3})/;o.test(r);)r=r.replace(o,"$1,$2");return r+a}function _templateObject13(){var e=_taggedTemplateLiteral(["\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n  fill : none;\n  stroke: ",";\n  stroke-width: 2;\n"]);return _templateObject13=function(){return e},e}function _templateObject12(){var e=_taggedTemplateLiteral(["\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n  fill : ",";\n  stroke: ",";\n  opacity: 0.2;\n  stroke-width: 2;\n"]);return _templateObject12=function(){return e},e}function _templateObject11(){var e=_taggedTemplateLiteral(["\n  display: inline-block;\n  font-size : 12px;\n  color : ",";\n  font-family : sans-serif;\n  font-weight: lighter;\n  position: absolute;\n  top: 12px;\n  transform: translate(50%,-",");\n  background: ",";\n  padding: "," ",";\n  border-radius: ",";\n  opacity: 0;\n  transition: opacity 200ms;\n  \n  animation: "," 200ms ease-out;\n  \n  &:not(:empty) {\n    opacity: 1;\n    \n    &:after {\n        content: '';\n        position: absolute;\n        top: 100%;\n        left: 50%;\n        border-left: 4px solid transparent;\n        border-right: 4px solid transparent;\n        border-top: 4px solid ",";\n        transform: translate(-50%, 0);\n    }\n  }\n"]);return _templateObject11=function(){return e},e}function _templateObject10(){var e=_taggedTemplateLiteral(["\n  top: 12px;\n  left: 0;\n  position: absolute;\n  color : ",";\n  font-family : sans-serif;\n  font-size : 12px;\n  font-weight: lighter;\n  text-align: center;\n  min-width: 100px;\n  transform:translate(-50%,0);\n\n  ",":last-child & {\n    text-align: right;\n    transform:translate(-100%,0);\n  }\n\n  ",":first-child & {\n    text-align: left;\n    transform:translate(0,0);\n  }\n"]);return _templateObject10=function(){return e},e}function _templateObject9(){var e=_taggedTemplateLiteral(["\n  flex: 1 1 auto;\n  border-left : 2px solid ","; \n  pointer-events : none;\n  overflow: visible;\n  position: relative;\n  height: 10px;\n  \n  &:last-child {\n    width: 0;\n    flex: 0 0 0; \n  }\n"]);return _templateObject9=function(){return e},e}function _templateObject8(){var e=_taggedTemplateLiteral(["\n  display: flex;\n  flex-flow: row nowrap;\n  border-top : 2px solid ","; \n"]);return _templateObject8=function(){return e},e}function _templateObject7(){var e=_taggedTemplateLiteral(["\n  stroke-width : 0;\n  stroke: transparent;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  transition: stroke-width 100ms;\n  \n  ",":hover ~ & {\n  stroke-width : 2px;\n    stroke: ","; \n  }\n"]);return _templateObject7=function(){return e},e}function _templateObject6(){var e=_taggedTemplateLiteral(["\n  stroke-width : 2px;\n  stroke: ",";\n  opacity: 0.2;\n  vector-effect: non-scaling-stroke;\n  pointer-events : none;\n"]);return _templateObject6=function(){return e},e}function _templateObject5(){var e=_taggedTemplateLiteral(["\n  stroke-width : 0;\n  stroke: ",";\n  transition: stroke-width 300ms, stroke 300ms;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  stroke-linecap: round;\n   \n  ",":hover ~ & {\n    stroke-width : 6px; \n  }\n"]);return _templateObject5=function(){return e},e}function _templateObject4(){var e=_taggedTemplateLiteral(["\n  stroke-width : 6px;\n  stroke: ",";\n  transition: stroke-width 300ms;\n  pointer-events : none;\n  vector-effect: non-scaling-stroke;\n  stroke-linecap: round;\n   \n  ",":hover ~ & {\n    stroke-width : 10px; \n  }\n"]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=_taggedTemplateLiteral(["\n  fill: transparent;\n  vector-effect: non-scaling-stroke;\n"]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=_taggedTemplateLiteral(["\n    display : block;\n    overflow: visible;\n    height: 150px;\n    width: 100%;\n    position: relative;\n"]);return _templateObject2=function(){return e},e}function _templateObject$1(){var e=_taggedTemplateLiteral(["\n    display: block;\n    padding: "," 0 0 0;\n    position: relative;\n"]);return _templateObject$1=function(){return e},e}var Container=styled__default.div(_templateObject$1(),spacings.large),ChartContainer=styled__default.svg(_templateObject2()),HoverElement=styled__default.rect(_templateObject3()),BlueDot=styled__default.line(_templateObject4(),colors.interactive,HoverElement),LightBlueDot=styled__default.line(_templateObject5(),lightColors.interactive,HoverElement),TopLine=styled__default.line(_templateObject6(),colors.interactive),BottomLine=styled__default.line(_templateObject7(),HoverElement,colors.interactive),AxisLine=styled__default.div(_templateObject8(),colors.dark),AxisPoint=styled__default.div(_templateObject9(),colors.dark),AxisValue=styled__default.div(_templateObject10(),colors.dark,AxisPoint,AxisPoint),Value=styled__default.span(_templateObject11(),colors.white,spacings.small,colors.interactive,spacings.tiny,spacings.small,spacings.tiny,PopIn,colors.interactive),ChartFill=styled__default.polyline(_templateObject12(),colors.interactive,colors.interactive),ChartLine=styled__default.polyline(_templateObject13(),colors.interactive),LineChart=function(){function n(e){var t;return _classCallCheck(this,n),(t=_possibleConstructorReturn(this,_getPrototypeOf(n).call(this,e))).formatValuesForLine=t.formatValuesForLine.bind(_assertThisInitialized(t)),t.formatValuesForDots=t.formatValuesForDots.bind(_assertThisInitialized(t)),t.showValue=t.showValue.bind(_assertThisInitialized(t)),t.decimals=t.props.decimals?t.props.decimals:0,t.state={shownValue:0,shownPosition:1},t}return _inherits(n,React.Component),_createClass(n,[{key:"render",value:function(){var r=this;if(!this.props.values)return null;var a=Math.max.apply(Math,_toConsumableArray(this.props.values)),e=this.formatValuesForLine(),t=[0,a].concat(_toConsumableArray(e),[100,a]),n=this.formatValuesForDots(),o=110/n.length,l=this.formatCoordinatesForAxis();return React__default.createElement(Container,null,React__default.createElement(ChartContainer,{preserveAspectRatio:"none",viewBox:"0 0 100 "+a},React__default.createElement(ChartFill,{points:t.join(",")}),React__default.createElement(ChartLine,{points:e.join(",")}),n.map(function(e){var t=e[0],n=e[1];return React__default.createElement("g",{key:t},React__default.createElement(HoverElement,{x:t-o/2,y:0,width:.8*o,height:a,onMouseEnter:function(){r.showValue(a-n,t)},onMouseLeave:function(){r.showValue(null,null)}}),React__default.createElement(BottomLine,{x1:t,y1:n,x2:t,y2:a}),React__default.createElement(TopLine,{x1:t,y1:n,x2:t,y2:0}),React__default.createElement(BlueDot,{x1:t,y1:n,x2:t,y2:n}),React__default.createElement(LightBlueDot,{x1:t,y1:n,x2:t,y2:n}))})),l.length?React__default.createElement(AxisLine,null,l.map(function(e){return React__default.createElement(AxisPoint,{key:e.x},React__default.createElement(AxisValue,null,e.label))})):null,null!==this.state.shownValue?React__default.createElement(Value,{style:{right:this.state.shownPosition+"%"}},this.props.prefix," ",formatNumber(this.state.shownValue,this.decimals)," ",this.props.postfix):null)}},{key:"showValue",value:function(e,t){this.setState({shownValue:e,shownPosition:100-t})}},{key:"formatValuesForLine",value:function(){if(this.props.values.length<2)return[];for(var e=[],t=Math.max.apply(Math,[0].concat(_toConsumableArray(this.props.values))),n=100/(this.props.values.length-1),r=0;r<this.props.values.length;r++)e.push(r*n),e.push(Math.min(t,t-this.props.values[r]));return e}},{key:"formatCoordinatesForAxis",value:function(){if(!this.props.axis)return[];for(var e=[],t=100/(this.props.axis.length-1),n=0;n<this.props.axis.length;n++)e.push({x:n*t,label:this.props.axis[n]});return e}},{key:"formatValuesForDots",value:function(){if(this.props.values.length<2)return[];for(var e=[],t=Math.max.apply(Math,_toConsumableArray(this.props.values)),n=100/(this.props.values.length-1),r=0;r<this.props.values.length;r++)e.push([r*n,Math.min(t,t-this.props.values[r])]);return e}}]),n}();function _templateObject7$1(){var e=_taggedTemplateLiteral(["\n    stroke-width: 2px;\n    fill: none;\n    stroke: ",";\n    //stroke-linecap: round;\n    transform: rotate(-90deg);\n    transform-origin: center;\n"]);return _templateObject7$1=function(){return e},e}function _templateObject6$1(){var e=_taggedTemplateLiteral(["\n    stroke-width: 2px;\n    fill: none;\n    stroke: ",";\n    opacity: 0.2;\n"]);return _templateObject6$1=function(){return e},e}function _templateObject5$1(){var e=_taggedTemplateLiteral(["\n    display : block;\n    height: 150px;\n    width: 150px;\n"]);return _templateObject5$1=function(){return e},e}function _templateObject4$1(){var e=_taggedTemplateLiteral(["\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n"]);return _templateObject4$1=function(){return e},e}function _templateObject3$1(){var e=_taggedTemplateLiteral(["\n    position: absolute;\n    display : block;\n    text-align: center;\n    top: 80px;\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n    width: 150px;\n"]);return _templateObject3$1=function(){return e},e}function _templateObject2$1(){var e=_taggedTemplateLiteral(["\n    position: absolute;\n    display : block;\n    text-align: center;\n    top: 40px;\n    font-size: ",";\n    color: ",";\n    font-family : sans-serif;\n    width: 150px;\n"]);return _templateObject2$1=function(){return e},e}function _templateObject$2(){var e=_taggedTemplateLiteral(["\n    display : block;\n    position: relative;\n    height: 150px;\n    width: 150px;\n"]);return _templateObject$2=function(){return e},e}var Container$1=styled__default.div(_templateObject$2()),Value$1=styled__default.div(_templateObject2$1(),spacings.large,colors.interactive),Metric=styled__default.div(_templateObject3$1(),spacings.medium,colors.interactive),ValueAddition=styled__default.span(_templateObject4$1(),spacings.medium,colors.interactive),ChartContainer$1=styled__default.svg(_templateObject5$1()),CircleBackground=styled__default.circle(_templateObject6$1(),colors.interactive),CircleValue=styled__default.circle(_templateObject7$1(),colors.interactive),CircleChart=function(){function t(e){return _classCallCheck(this,t),_possibleConstructorReturn(this,_getPrototypeOf(t).call(this,e))}return _inherits(t,React.Component),_createClass(t,[{key:"render",value:function(){var e=this.props.value?this.props.value:0,t=e/(this.props.maxValue?this.props.maxValue:0)*100,n=formatNumber(e,this.props.decimals);return React__default.createElement(Container$1,null,React__default.createElement(ChartContainer$1,{viewBox:"0 0 33.83098862 33.83098862"},React__default.createElement(CircleBackground,{cx:"16.91549431",cy:"16.91549431",r:"15.91549431"}),React__default.createElement(CircleValue,{strokeDasharray:t+",100",cx:"16.91549431",cy:"16.91549431",r:"15.91549431"})),React__default.createElement(Value$1,null,React__default.createElement(ValueAddition,null,this.props.prefix),n,React__default.createElement(ValueAddition,null,this.props.postfix)),React__default.createElement(Metric,null,this.props.metric))}}]),t}();exports.CircleChart=CircleChart,exports.LineChart=LineChart;
